<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDD 3001 ‚Ä¢ Mapa da Cidade de Deus</title>
    <link rel="stylesheet" href="/assets/css/global.css">
    <style>
        .mapa-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .mapa-titulo {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-primary));
            border: 2px solid var(--accent-primary);
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }
        
        .mapa-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin: 40px 0;
        }
        
        .mapa-node {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            padding: 30px 15px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .mapa-node::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, transparent 0%, var(--bg-primary) 100%);
            opacity: 0;
            transition: var(--transition-normal);
        }
        
        .mapa-node:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .mapa-node:hover::before {
            opacity: 0.3;
        }
        
        .mapa-node.seguro {
            border-color: var(--success);
        }
        
        .mapa-node.risco {
            border-color: var(--error);
            animation: pulse 2s infinite;
        }
        
        .mapa-node.visitado {
            border-color: var(--accent-primary);
        }
        
        .mapa-node.visitado::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 5px;
            color: var(--accent-primary);
            font-size: 20px;
        }
        
        .mapa-icone {
            font-size: 50px;
            margin-bottom: 15px;
        }
        
        .mapa-nome {
            color: var(--accent-primary);
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .mapa-desc {
            color: var(--text-tertiary);
            font-size: 11px;
            margin-bottom: 10px;
        }
        
        .mapa-xp {
            font-size: 10px;
            padding: 2px 8px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            display: inline-block;
        }
        
        .legenda {
            display: flex;
            gap: 30px;
            margin: 30px 0;
            padding: 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            justify-content: center;
        }
        
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cor-legenda {
            width: 20px;
            height: 20px;
            border: 2px solid;
        }
        
        .cor.seguro { border-color: var(--success); }
        .cor.risco { border-color: var(--error); }
        .cor.visitado { border-color: var(--accent-primary); }
        
        .info-painel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: 20px;
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <span class="terminal-path">~/cdd-3001/mapa</span>
            <span class="terminal-status">CIDADE DE DEUS ‚Ä¢ 3001</span>
        </div>

        <h1>üó∫Ô∏è MAPA DA RESIST√äNCIA</h1>
        
        <div class="nav-bar">
            <a href="/cdd/">‚Üê TERMINAL</a>
            <a href="#" class="active">MAPA</a>
            <a href="/cdd/missoes/">MISS√ïES</a>
        </div>

        <div class="mapa-titulo">
            <h2 style="color: var(--accent-primary);">üìç CIDADE DE DEUS</h2>
            <p style="color: var(--accent-secondary);">Zonas de seguran√ßa e √°reas de risco</p>
        </div>

        <!-- Legenda -->
        <div class="legenda">
            <div class="legenda-item">
                <span class="cor-legenda" style="border-color: var(--success);"></span>
                <span>√Årea Segura</span>
            </div>
            <div class="legenda-item">
                <span class="cor-legenda" style="border-color: var(--error);"></span>
                <span>Zona de Risco</span>
            </div>
            <div class="legenda-item">
                <span class="cor-legenda" style="border-color: var(--accent-primary);"></span>
                <span>Visitado</span>
            </div>
        </div>

        <!-- Grid do Mapa -->
        <div class="mapa-grid">
            <!-- Linha 1 -->
            <div class="mapa-node seguro" data-modulo="igreja" onclick="visitarLocal('igreja')">
                <div class="mapa-icone">‚õ™</div>
                <div class="mapa-nome">IGREJA</div>
                <div class="mapa-desc">Sede da Resist√™ncia ‚Ä¢ D. Jurema</div>
                <span class="mapa-xp">+50 XP</span>
            </div>

            <div class="mapa-node seguro" data-modulo="escola" onclick="visitarLocal('escola')">
                <div class="mapa-icone">üè´</div>
                <div class="mapa-nome">ESCOLA</div>
                <div class="mapa-desc">Arquivos ‚Ä¢ Mem√≥rias</div>
                <span class="mapa-xp">+30 XP</span>
            </div>

            <div class="mapa-node risco" data-modulo="fabrica" onclick="visitarLocal('fabrica')">
                <div class="mapa-icone">üè≠</div>
                <div class="mapa-nome">F√ÅBRICA</div>
                <div class="mapa-desc">Zona de Risco ‚Ä¢ Sentinelas</div>
                <span class="mapa-xp" style="color: var(--error);">+100 XP</span>
            </div>

            <!-- Linha 2 -->
            <div class="mapa-node seguro" data-modulo="associacao" onclick="visitarLocal('associacao')">
                <div class="mapa-icone">üèòÔ∏è</div>
                <div class="mapa-nome">ASSOCIA√á√ÉO</div>
                <div class="mapa-desc">Comando ‚Ä¢ Seu Jorge</div>
                <span class="mapa-xp">+40 XP</span>
            </div>

            <div class="mapa-node seguro" data-modulo="mercado" onclick="visitarLocal('mercado')">
                <div class="mapa-icone">üè™</div>
                <div class="mapa-nome">MERCADO</div>
                <div class="mapa-desc">Suprimentos ‚Ä¢ Itens</div>
                <span class="mapa-xp">+25 XP</span>
            </div>

            <div class="mapa-node" data-modulo="bar" onclick="visitarLocal('bar')">
                <div class="mapa-icone">üéµ</div>
                <div class="mapa-nome">BAR DO SEU Z√â</div>
                <div class="mapa-desc">√öltimo boteco ‚Ä¢ M√∫sica</div>
                <span class="mapa-xp">+20 XP</span>
            </div>

            <!-- Linha 3 -->
            <div class="mapa-node" data-modulo="campo" onclick="visitarLocal('campo')">
                <div class="mapa-icone">‚öΩ</div>
                <div class="mapa-nome">CAMPO</div>
                <div class="mapa-desc">Treinamento ‚Ä¢ Luan</div>
                <span class="mapa-xp">+35 XP</span>
            </div>

            <div class="mapa-node risco" data-modulo="praca" onclick="visitarLocal('praca')">
                <div class="mapa-icone">üå≥</div>
                <div class="mapa-nome">PRA√áA</div>
                <div class="mapa-desc">Territ√≥rio dos Ecos</div>
                <span class="mapa-xp" style="color: var(--error);">+150 XP</span>
            </div>

            <div class="mapa-node" data-modulo="casas" onclick="visitarLocal('casas')">
                <div class="mapa-icone">üë§</div>
                <div class="mapa-nome">CASAS</div>
                <div class="mapa-desc">Moradores da Resist√™ncia</div>
                <span class="mapa-xp">+15 XP</span>
            </div>
        </div>

        <!-- Painel de Informa√ß√µes -->
        <div class="info-painel">
            <h3 style="color: var(--accent-primary);">üìä STATUS DAS ZONAS</h3>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                <div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>√Åreas Seguras:</span>
                        <span class="text-success" id="seguras-count">4</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <span>Zonas de Risco:</span>
                        <span class="text-error" id="risco-count">2</span>
                    </div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Locais Visitados:</span>
                        <span class="text-accent" id="visitados-count">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <span>XP Dispon√≠vel:</span>
                        <span class="text-accent">465 XP</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aviso -->
        <div style="background: rgba(255, 102, 102, 0.1); border: 1px solid var(--error); padding: 20px; margin: 20px 0;">
            <p style="color: var(--error);">‚ö†Ô∏è ZONAS DE RISCO: F√°brica e Pra√ßa est√£o infestadas de Brancos. V√° em grupo e preparado.</p>
        </div>
    </div>

    <script src="/cdd/assets/js/rpg-system.js"></script>
    <script>
        function visitarLocal(local) {
            if (rpg) {
                rpg.ganharXP(10, `local: ${local}`);
                rpg.coletarMemoria(1);
                
                const node = event.currentTarget;
                node.classList.add('visitado');
                
                let xpGanho = 0;
                switch(local) {
                    case 'igreja': xpGanho = 50; break;
                    case 'fabrica': xpGanho = 100; break;
                    case 'praca': xpGanho = 150; break;
                    default: xpGanho = 25;
                }
                rpg.ganharXP(xpGanho, `explorou ${local}`);
                
                // Chance de encontrar item
                if (Math.random() < 0.2) {
                    rpg.adicionarItem('m1');
                    alert('üéí Voc√™ encontrou um item!');
                }
            }
            
            // Atualizar contador de visitados
            const visitados = document.querySelectorAll('.mapa-node.visitado').length;
            document.getElementById('visitados-count').textContent = visitados;
        }
        
        // Carregar visitas salvas
        window.onload = function() {
            if (rpg) {
                const visitas = rpg.jogador.progresso.visitas;
                document.querySelectorAll('.mapa-node').forEach(node => {
                    const modulo = node.dataset.modulo;
                    if (modulo && visitas.includes(modulo)) {
                        node.classList.add('visitado');
                    }
                });
                
                const visitados = document.querySelectorAll('.mapa-node.visitado').length;
                document.getElementById('visitados-count').textContent = visitados;
            }
        };
    </script>
</body>
</html>
        <!-- Nova linha no mapa para Branquelos -->
        <div style="margin: 20px; padding: 15px; background: rgba(160, 160, 160, 0.1); border: 1px solid #a0a0a0; border-radius: 8px;">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div style="font-size: 30px;">üëª</div>
                <div>
                    <strong style="color: #a0a0a0;">ZONA DE BRANQUELOS</strong>
                    <p style="color: var(--text-tertiary); font-size: 12px;">√Årea de baixo risco ‚Ä¢ Branquelos s√£o fracos mas numerosos</p>
                </div>
                <div style="margin-left: auto;">
                    <span class="status" style="border-color: #a0a0a0; color: #a0a0a0;">N√çVEL 1 ‚Ä¢ +15 XP</span>
                </div>
            </div>
        </div>
