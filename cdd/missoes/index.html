<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDD 3001 ‚Ä¢ Miss√µes da Resist√™ncia</title>
    <link rel="stylesheet" href="/assets/css/global.css">
    <style>
        .missoes-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .jornada-header {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-primary));
            border: 2px solid var(--accent-primary);
            padding: 30px;
            margin: 30px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .filtros {
            display: flex;
            gap: 15px;
            margin: 20px;
            flex-wrap: wrap;
        }
        
        .filtro {
            padding: 8px 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .filtro:hover {
            border-color: var(--accent-primary);
        }
        
        .filtro.ativo {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }
        
        .missao-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 30px;
            margin: 25px 20px;
            transition: all var(--transition-normal);
        }
        
        .missao-card:hover {
            border-color: var(--accent-primary);
            transform: translateX(10px);
        }
        
        .missao-card.completa {
            opacity: 0.7;
            border-color: var(--success);
        }
        
        .missao-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .missao-nome {
            color: var(--accent-primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .missao-tipo {
            font-size: 12px;
            padding: 4px 12px;
            background: var(--bg-secondary);
            border: 1px solid;
        }
        
        .missao-tipo.principal { border-color: var(--accent-primary); color: var(--accent-primary); }
        .missao-tipo.secundaria { border-color: var(--accent-secondary); color: var(--accent-secondary); }
        .missao-tipo.epico { border-color: var(--epico); color: var(--epico); }
        
        .missao-desc {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .missao-objetivos {
            margin: 25px 0;
        }
        
        .objetivo-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .objetivo-check {
            width: 25px;
            height: 25px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }
        
        .objetivo-check:hover {
            border-color: var(--accent-primary);
        }
        
        .objetivo-check.concluido {
            background: var(--success);
            border-color: var(--success);
        }
        
        .objetivo-texto {
            flex: 1;
        }
        
        .objetivo-xp {
            color: var(--accent-primary);
            font-size: 12px;
        }
        
        .progresso {
            height: 8px;
            background: var(--bg-primary);
            margin: 25px 0;
        }
        
        .progresso-preenchido {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            width: 0%;
        }
        
        .missao-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        
        .recompensas {
            display: flex;
            gap: 15px;
        }
        
        .recompensa-item {
            background: var(--bg-secondary);
            padding: 4px 12px;
            border: 1px solid var(--border-color);
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <span class="terminal-path">~/cdd-3001/missoes</span>
            <span class="terminal-status">CENTRAL DE MISS√ïES</span>
        </div>

        <h1>‚öîÔ∏è MISS√ïES DA RESIST√äNCIA</h1>
        
        <div class="nav-bar">
            <a href="/cdd/">‚Üê TERMINAL</a>
            <a href="#" class="active">MISS√ïES</a>
            <a href="/cdd/mapa/">MAPA</a>
        </div>

        <div class="jornada-header">
            <div>
                <h2 style="color: var(--accent-primary);">JORNADA DO ARQUIVISTA</h2>
                <p style="color: var(--text-secondary);">Complete miss√µes para fortalecer a resist√™ncia</p>
            </div>
            <div style="text-align: right;">
                <div style="color: var(--accent-primary); font-size: 2rem;" id="missoes-completas">0/6</div>
                <div style="color: var(--text-tertiary);">miss√µes conclu√≠das</div>
            </div>
        </div>

        <div class="filtros">
            <div class="filtro ativo" onclick="filtrar('todas')">TODAS</div>
            <div class="filtro" onclick="filtrar('principal')">PRINCIPAIS</div>
            <div class="filtro" onclick="filtrar('secundaria')">SECUND√ÅRIAS</div>
            <div class="filtro" onclick="filtrar('epico')">√âPICAS</div>
        </div>

        <div id="missoes-lista">
            <!-- Miss√£o 1 - Principal -->
            <div class="missao-card" data-tipo="principal" id="missao1">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>üìú</span> O Primeiro Fragmento
                    </div>
                    <span class="missao-tipo principal">PRINCIPAL ‚Ä¢ NIVEL 1</span>
                </div>
                
                <div class="missao-desc">
                    Sua jornada come√ßa aqui. D. Jurema precisa de ajuda para organizar as mem√≥rias antigas. 
                    Visite a Igreja e encontre os primeiros fragmentos do passado.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o1">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao1', 'o1', this)">‚úì</div>
                        <span class="objetivo-texto">Visitar a Igreja</span>
                        <span class="objetivo-xp">+50 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o2">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao1', 'o2', this)">‚úì</div>
                        <span class="objetivo-texto">Falar com D. Jurema</span>
                        <span class="objetivo-xp">+75 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o3">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao1', 'o3', this)">‚úì</div>
                        <span class="objetivo-texto">Coletar 3 mem√≥rias</span>
                        <span class="objetivo-xp">+75 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso1" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--accent-primary);">DISPON√çVEL</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+200 XP</span>
                        <span class="recompensa-item">üß† Fragmento</span>
                        <span class="recompensa-item">üí∞ 100</span>
                    </div>
                </div>
            </div>

            <!-- Miss√£o 2 - Principal -->
            <div class="missao-card" data-tipo="principal" id="missao2">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>üëª</span> Ca√ßa aos Sentinelas
                    </div>
                    <span class="missao-tipo principal">PRINCIPAL ‚Ä¢ NIVEL 2</span>
                </div>
                
                <div class="missao-desc">
                    Marcos precisa de ajuda para eliminar os Sentinelas que est√£o se aproximando da F√°brica. 
                    Acompanhe-o em uma miss√£o de patrulha.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o4">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao2', 'o4', this)">‚úì</div>
                        <span class="objetivo-texto">Ir at√© a F√°brica</span>
                        <span class="objetivo-xp">+100 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o5">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao2', 'o5', this)">‚úì</div>
                        <span class="objetivo-texto">Derrotar 3 Sentinelas</span>
                        <span class="objetivo-xp">+150 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o6">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao2', 'o6', this)">‚úì</div>
                        <span class="objetivo-texto">Voltar ao acampamento</span>
                        <span class="objetivo-xp">+50 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso2" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--accent-primary);">DISPON√çVEL</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+300 XP</span>
                        <span class="recompensa-item">üî™ Fac√£o</span>
                        <span class="recompensa-item">üí∞ 200</span>
                    </div>
                </div>
            </div>

            <!-- Miss√£o 3 - Secund√°ria -->
            <div class="missao-card" data-tipo="secundaria" id="missao3">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>üìñ</span> Mem√≥rias da Igreja
                    </div>
                    <span class="missao-tipo secundaria">SECUND√ÅRIA ‚Ä¢ NIVEL 1</span>
                </div>
                
                <div class="missao-desc">
                    D. Jurema quer organizar todas as mem√≥rias antigas. Ajude-a a catalogar os fragmentos.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o7">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao3', 'o7', this)">‚úì</div>
                        <span class="objetivo-texto">Ouvir 3 hist√≥rias de D. Jurema</span>
                        <span class="objetivo-xp">+50 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o8">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao3', 'o8', this)">‚úì</div>
                        <span class="objetivo-texto">Coletar 5 mem√≥rias</span>
                        <span class="objetivo-xp">+100 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso3" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--accent-primary);">DISPON√çVEL</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+150 XP</span>
                        <span class="recompensa-item">üíä Kit M√©dico</span>
                        <span class="recompensa-item">üí∞ 100</span>
                    </div>
                </div>
            </div>

            <!-- Miss√£o 4 - Secund√°ria -->
            <div class="missao-card" data-tipo="secundaria" id="missao4">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>‚ö°</span> Treinamento com Luan
                    </div>
                    <span class="missao-tipo secundaria">SECUND√ÅRIA ‚Ä¢ NIVEL 1</span>
                </div>
                
                <div class="missao-desc">
                    Luan quer ensinar voc√™ a se mover pelos telhados. Aprenda as rotas seguras.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o9">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao4', 'o9', this)">‚úì</div>
                        <span class="objetivo-texto">Subir nos telhados</span>
                        <span class="objetivo-xp">+30 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o10">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao4', 'o10', this)">‚úì</div>
                        <span class="objetivo-texto">Atravessar 3 quarteir√µes</span>
                        <span class="objetivo-xp">+45 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o11">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao4', 'o11', this)">‚úì</div>
                        <span class="objetivo-texto">Encontrar suprimentos</span>
                        <span class="objetivo-xp">+75 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso4" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--accent-primary);">DISPON√çVEL</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+150 XP</span>
                        <span class="recompensa-item">üî´ Muni√ß√£o</span>
                        <span class="recompensa-item">üí∞ 50</span>
                    </div>
                </div>
            </div>

            <!-- Miss√£o 5 - √âpica -->
            <div class="missao-card" data-tipo="epico" id="missao5">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>üíÄ</span> O Eco da F√°brica
                    </div>
                    <span class="missao-tipo epico">√âPICA ‚Ä¢ NIVEL 4</span>
                </div>
                
                <div class="missao-desc">
                    Um Eco est√° aterrorizando os arredores da F√°brica. Junte-se a Marcos e Seu Jorge para elimin√°-lo.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o12">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao5', 'o12', this)">‚úì</div>
                        <span class="objetivo-texto">Ir at√© a F√°brica √† noite</span>
                        <span class="objetivo-xp">+150 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o13">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao5', 'o13', this)">‚úì</div>
                        <span class="objetivo-texto">Encontrar o Eco</span>
                        <span class="objetivo-xp">+200 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o14">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao5', 'o14', this)">‚úì</div>
                        <span class="objetivo-texto">Derrotar o Eco</span>
                        <span class="objetivo-xp">+300 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso5" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--epico);">√âPICA</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+650 XP</span>
                        <span class="recompensa-item">üèπ Besta</span>
                        <span class="recompensa-item">üí∞ 500</span>
                    </div>
                </div>
            </div>

            <!-- Miss√£o 6 - √âpica -->
            <div class="missao-card" data-tipo="epico" id="missao6">
                <div class="missao-header">
                    <div class="missao-nome">
                        <span>üëë</span> O Despertar do Alfa
                    </div>
                    <span class="missao-tipo epico">√âPICA ‚Ä¢ NIVEL 6</span>
                </div>
                
                <div class="missao-desc">
                    Um Alfa foi avistado na Pra√ßa. Esta √© a maior amea√ßa que a resist√™ncia j√° enfrentou. 
                    Re√∫na todos os guerreiros para o confronto final.
                </div>
                
                <div class="missao-objetivos">
                    <div class="objetivo-item" data-objetivo="o15">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao6', 'o15', this)">‚úì</div>
                        <span class="objetivo-texto">Reunir os guerreiros</span>
                        <span class="objetivo-xp">+200 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o16">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao6', 'o16', this)">‚úì</div>
                        <span class="objetivo-texto">Enfrentar o Alfa</span>
                        <span class="objetivo-xp">+400 XP</span>
                    </div>
                    <div class="objetivo-item" data-objetivo="o17">
                        <div class="objetivo-check" onclick="toggleObjetivo('missao6', 'o17', this)">‚úì</div>
                        <span class="objetivo-texto">Sobreviver</span>
                        <span class="objetivo-xp">+400 XP</span>
                    </div>
                </div>

                <div class="progresso">
                    <div class="progresso-preenchido" id="progresso6" style="width: 0%"></div>
                </div>

                <div class="missao-footer">
                    <span class="missao-status" style="color: var(--epico);">√âPICA</span>
                    <div class="recompensas">
                        <span class="recompensa-item">+1000 XP</span>
                        <span class="recompensa-item">üî• Lan√ßa-chamas</span>
                        <span class="recompensa-item">üí∞ 1000</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/cdd/assets/js/rpg-system.js"></script>
    <script>
        // Estado das miss√µes
        let missoes = {
            missao1: { progresso: 0, total: 3, completa: false },
            missao2: { progresso: 0, total: 3, completa: false },
            missao3: { progresso: 0, total: 2, completa: false },
            missao4: { progresso: 0, total: 3, completa: false },
            missao5: { progresso: 0, total: 3, completa: false },
            missao6: { progresso: 0, total: 3, completa: false }
        };
        
        function toggleObjetivo(missaoId, objetivoId, elemento) {
            if (elemento.classList.contains('concluido')) return;
            
            elemento.classList.add('concluido');
            elemento.innerHTML = '‚úì';
            
            // Ganhar XP
            const xpText = elemento.parentElement.querySelector('.objetivo-xp').textContent;
            const xp = parseInt(xpText.replace('+', '').replace(' XP', ''));
            rpg.ganharXP(xp, 'objetivo');
            
            // Atualizar progresso
            missoes[missaoId].progresso++;
            const percent = (missoes[missaoId].progresso / missoes[missaoId].total) * 100;
            document.getElementById('progresso' + missaoId.slice(-1)).style.width = percent + '%';
            
            // Verificar se miss√£o completou
            if (missoes[missaoId].progresso === missoes[missaoId].total && !missoes[missaoId].completa) {
                missoes[missaoId].completa = true;
                
                // Marcar card como completo
                document.getElementById(missaoId).classList.add('completa');
                
                // Ganhar XP da miss√£o
                const missaoCard = document.getElementById(missaoId);
                const xpRecompensa = missaoCard.querySelector('.recompensa-item').textContent;
                const xpFinal = parseInt(xpRecompensa.replace('+', '').replace(' XP', ''));
                rpg.ganharXP(xpFinal, 'miss√£o completa');
                
                // Notifica√ß√£o
                rpg.notificar('‚öîÔ∏è MISS√ÉO COMPLETA!', missaoCard.querySelector('.missao-nome').textContent, '#4ade80');
                
                // Atualizar contador
                const completas = Object.values(missoes).filter(m => m.completa).length;
                document.getElementById('missoes-completas').textContent = completas + '/6';
            }
            
            // Salvar progresso
            localStorage.setItem('cdd3001_missoes', JSON.stringify(missoes));
        }
        
        function filtrar(tipo) {
            document.querySelectorAll('.filtro').forEach(f => f.classList.remove('ativo'));
            event.target.classList.add('ativo');
            
            document.querySelectorAll('.missao-card').forEach(card => {
                if (tipo === 'todas' || card.dataset.tipo === tipo) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        // Carregar progresso salvo
        window.onload = function() {
            const saved = localStorage.getItem('cdd3001_missoes');
            if (saved) {
                missoes = JSON.parse(saved);
                
                // Reaplicar estados visuais
                for (let [id, data] of Object.entries(missoes)) {
                    const missao = document.getElementById(id);
                    if (missao) {
                        const objetivos = missao.querySelectorAll('.objetivo-check');
                        for (let i = 0; i < data.progresso; i++) {
                            if (objetivos[i]) {
                                objetivos[i].classList.add('concluido');
                                objetivos[i].innerHTML = '‚úì';
                            }
                        }
                        
                        const percent = (data.progresso / data.total) * 100;
                        document.getElementById('progresso' + id.slice(-1)).style.width = percent + '%';
                        
                        if (data.completa) {
                            missao.classList.add('completa');
                        }
                    }
                }
            }
            
            const completas = Object.values(missoes).filter(m => m.completa).length;
            document.getElementById('missoes-completas').textContent = completas + '/6';
        };
    </script>
</body>
</html>
