<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDD - Sistema Sincronia Ancestral</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
        :root { --p-green: #00ff00; --p-red: #ff3333; --p-blue: #33ccff; --p-gold: #ffd700; }
        * { box-sizing: border-box; }
        body { 
            background: #000; color: #fff; font-family: 'Courier Prime', monospace; 
            margin: 0; overflow: hidden; height: 100vh;
        }

        /* UI LAYERS */
        .screen { position: fixed; inset: 0; display: flex; flex-direction: column; background: #000; z-index: 10; }
        #game-ui { display: none; }

        /* HUD */
        .hud-top { 
            padding: 20px; display: flex; justify-content: space-between; 
            background: rgba(20,20,20,0.9); border-bottom: 1px solid #333;
        }
        .stat-box { margin-bottom: 5px; }
        .bar-bg { width: 150px; height: 8px; background: #222; border: 1px solid #444; }
        .bar-fill { height: 100%; transition: 0.4s; }

        /* MUNDO VIRTUAL */
        .stage { 
            flex-grow: 1; display: flex; align-items: center; justify-content: center; 
            position: relative; transition: 1.5s; 
        }
        .past-active .stage { background: #1a0d00; box-shadow: inset 0 0 100px #000; }

        /* INVENT√ÅRIO */
        .inventory { position: absolute; left: 20px; top: 100px; background: rgba(0,0,0,0.7); padding: 10px; border: 1px solid #333; }
        .inv-slot { font-size: 12px; margin-bottom: 5px; color: var(--p-blue); cursor: pointer; }

        /* CONSOLE DE NARRA√á√ÉO */
        .terminal {
            height: 200px; background: #0a0a0a; border-top: 2px solid #333;
            padding: 20px; display: flex; flex-direction: column;
        }
        #log { flex-grow: 1; overflow-y: auto; font-size: 14px; color: #888; margin-bottom: 10px; }
        .controls { display: flex; gap: 10px; justify-content: center; }

        /* BOT√ïES */
        button { 
            background: transparent; border: 1px solid #fff; color: #fff; 
            padding: 10px 15px; cursor: pointer; font-family: 'Courier Prime';
            font-size: 12px; transition: 0.2s;
        }
        button:hover { background: #fff; color: #000; }
        button:disabled { border-color: #333; color: #333; cursor: not-allowed; }
        .btn-sync { border-color: var(--p-gold); color: var(--p-gold); }

        /* BATTLE OVERLAY */
        #battle-view {
            display: none; position: absolute; inset: 0; z-index: 100;
            background: rgba(0,0,0,0.9); flex-direction: column; align-items: center; justify-content: center;
        }
    </style>
</head>
<body class="present-mode">

    <div id="start-screen" class="screen" style="align-items:center; justify-content:center;">
        <h1 style="letter-spacing:15px; color:var(--p-red);">CDD: CIDADE DO DIABO</h1>
        <p>INICIANDO PROTOCOLO DE SINCRONIA...</p>
        <div style="display:flex; gap:20px; margin-top:30px;">
            <button onclick="init('BENTO', 'MATA')">BENTO [CA√áADOR]</button>
            <button onclick="init('DANDARA', 'VENTO')">DANDARA [JUSTI√áA]</button>
            <button onclick="init('TI√ÉO', 'ROCHA')">TI√ÉO [FOR√áA]</button>
        </div>
    </div>

    <div id="game-ui" class="screen">
        <div class="hud-top">
            <div>
                <div class="stat-box">GUARDIAO: <span id="p-name" style="color:var(--p-blue)">-</span></div>
                <div class="stat-box">ENERGIA VITAL
                    <div class="bar-bg"><div id="hp-bar" class="bar-fill" style="background:var(--p-green); width:100%;"></div></div>
                </div>
            </div>
            <div style="text-align:right;">
                <div id="era-label" style="color:var(--p-gold)">√âPOCA: CDD 2026</div>
                <div id="xp-label">XP: 0</div>
            </div>
        </div>

        <div class="stage">
            <div id="player-sprite" style="font-size:100px; filter: drop-shadow(0 0 10px #fff);">üõ°Ô∏è</div>
            
            <div class="inventory">
                <div style="font-size:10px; margin-bottom:10px; border-bottom:1px solid #333;">INVENT√ÅRIO</div>
                <div id="inv-items"></div>
            </div>

            <div id="battle-view">
                <h2 id="enemy-title" style="color:var(--p-red)">ALVO DETECTADO</h2>
                <div class="bar-bg" style="width:300px; height:15px;"><div id="enemy-hp" class="bar-fill" style="background:var(--p-red); width:100%;"></div></div>
                <div style="margin-top:30px;">
                    <button onclick="doAttack()" style="border-color:var(--p-red); padding:20px;">ATACAR COM PODER ANCESTRAL</button>
                </div>
            </div>
        </div>

        <div class="terminal">
            <div id="log"></div>
            <div class="controls">
                <button id="btn-explore" onclick="explore()">EXPLORAR AREA</button>
                <button class="btn-sync" onclick="sync()">SINCRONIA ANCESTRAL</button>
            </div>
        </div>
    </div>

    <script>
        let state = {
            name: '', energy: '', hp: 100, xp: 0, 
            isPast: false, inBattle: false,
            items: { 'CURA': 2 },
            enemyHp: 0
        };

        function init(name, energy) {
            state.name = name; state.energy = energy;
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-ui').style.display = 'flex';
            document.getElementById('p-name').innerText = name;
            updateInv();
            addLog(`Sistema iniciado. ${name} conectado √† rede de prote√ß√£o da CDD.`);
        }

        function addLog(msg) {
            const log = document.getElementById('log');
            log.innerHTML += `> ${msg}<br>`;
            log.scrollTop = log.scrollHeight;
        }

        function updateInv() {
            const div = document.getElementById('inv-items');
            div.innerHTML = '';
            for(let item in state.items) {
                if(state.items[item] > 0) {
                    div.innerHTML += `<div class="inv-slot" onclick="useItem('${item}')">${item} (${state.items[item]})</div>`;
                }
            }
        }

        function useItem(item) {
            if(item === 'CURA' && state.hp < 100) {
                state.hp = Math.min(100, state.hp + 40);
                state.items[item]--;
                updateInv();
                document.getElementById('hp-bar').style.width = state.hp + '%';
                addLog(`Voc√™ usou ${item}. Energia Vital restaurada.`);
            }
        }

        function explore() {
            if(state.inBattle) return;
            addLog("Explorando territ√≥rio...");
            let chance = Math.random();
            if(chance > 0.7) {
                startBattle();
            } else if (chance > 0.4) {
                addLog("Voc√™ encontrou suprimentos de resist√™ncia!");
                state.items['CURA']++;
                updateInv();
            } else {
                addLog("Nada al√©m de sombras e ecos por aqui.");
            }
        }

        function sync() {
            if(state.inBattle) return addLog("Erro: Sincronia inst√°vel durante combate!");
            state.isPast = !state.isPast;
            document.body.className = state.isPast ? "past-active" : "present-mode";
            document.getElementById('era-label').innerText = state.isPast ? "√âPOCA: FAZENDA 1800" : "√âPOCA: CDD 2026";
            addLog(state.isPast ? "A vis√£o se torna s√©pia. O cheiro da mata invade os pulm√µes." : "O asfalto vibra. O tempo presente recuperado.");
        }

        function startBattle() {
            state.inBattle = true;
            state.enemyHp = 100;
            document.getElementById('battle-view').style.display = 'flex';
            document.getElementById('enemy-hp').style.width = '100%';
            const eName = state.isPast ? "FEITOR DA CASA GRANDE" : "MILICIANO CORRUPTO";
            document.getElementById('enemy-title').innerText = eName;
            addLog(`ALERTA: ${eName} interceptou sua posi√ß√£o!`);
        }

        function doAttack() {
            let dmg = Math.floor(Math.random() * 25) + 15;
            state.enemyHp -= dmg;
            document.getElementById('enemy-hp').style.width = state.enemyHp + '%';
            addLog(`Voc√™ atingiu o alvo com sua energia de ${state.energy}! -${dmg} HP`);

            if(state.enemyHp <= 0) {
                state.inBattle = false;
                state.xp += 50;
                document.getElementById('xp-label').innerText = `XP: ${state.xp}`;
                document.getElementById('battle-view').style.display = 'none';
                addLog("Alvo neutralizado. O territ√≥rio est√° seguro... por enquanto.");
            } else {
                let eDmg = 15;
                state.hp -= eDmg;
                document.getElementById('hp-bar').style.width = state.hp + '%';
                addLog(`O inimigo contra-ataca! -${eDmg} HP`);
                if(state.hp <= 0) {
                    alert("Sincronia perdida. O Guardi√£o caiu.");
                    location.reload();
                }
            }
        }
    </script>
</body>
</html>
