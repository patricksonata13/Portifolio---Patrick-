<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrick Sonata | Hub Criativo</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/hub.css">
</head>
<body>
    <button id="audio-control" onclick="toggleMute()">üîä SOM: ON</button>

    <div class="nav-right">
        <button onclick="togglePanel('cdd')">CDD 3001</button>
        <button onclick="togglePanel('patika')">Patika</button>
        <button onclick="togglePanel('aulas')">Aulas</button>
    </div>

    <div class="hero-bg">
        <img src="assets/images/fotodeperfil.jpg" class="profile-main-img" alt="Patrick Sonata">
        <h1>PATRICK SONATA</h1>
        <div class="nav-center">
            <button onclick="togglePanel('sobre')">Sobre</button>
            <button onclick="togglePanel('perfil')">Perfil</button>
            <button onclick="openGallery()">Trabalho</button>
        </div>
        <div class="badge-container" id="badges"><div class="badge">‚è≥</div></div>
    </div>

    <div id="side-panel" class="panel">
        <div class="close-x" onclick="closeAll()">X</div>
        <div id="panel-content"></div>
    </div>

    <div id="work-gallery" class="full-overlay">
        <div class="close-x" onclick="closeAll()" style="color:#fff">FECHAR X</div>
        <div class="gallery-container">
            <h2>PORTF√ìLIO VISUAL</h2>
            <img src="assets/images/works/pabloeluisao.webp" alt="Pablo e Luis√£o">
            <img src="assets/images/works/zorralogo.jpg" alt="Zorra">
            <img src="assets/images/works/cidadecorreriapeca.webp" alt="Cidade Correria">
        </div>
    </div>

    <template id="cdd-template">
        <div class="slugline">CDD - 3001 | SANKOFA OS</div>
        <div id="sin-terminal">
            <div id="log-output"></div>
            <div class="input-line">
                <span>></span>
                <input type="text" id="game-input" autofocus autocomplete="off">
            </div>
        </div>
        <div class="hud">SINCRONIA: <span id="sincronia-val">100%</span></div>
    </template>

    <script src="assets/js/database.js"></script>
    <script src="assets/js/jogo.js"></script>
    <script>
        let isMuted = false;
        function toggleMute() {
            isMuted = !isMuted;
            const btn = document.getElementById('audio-control');
            btn.innerText = isMuted ? "üîá SOM: OFF" : "üîä SOM: ON";
            if (window.audioCtx) isMuted ? window.audioCtx.suspend() : window.audioCtx.resume();
        }

        function togglePanel(id) {
            const panel = document.getElementById('side-panel');
            const contentDiv = document.getElementById('panel-content');
            if(!window.db || !window.db[id]) return;
            
            const data = window.db[id];
            if(data.isGame) {
                contentDiv.innerHTML = document.getElementById('cdd-template').innerHTML;
                setTimeout(() => { if(window.iniciarTerminalCDD) window.iniciarTerminalCDD(); }, 100);
            } else {
                contentDiv.innerHTML = `<div class="slugline">${data.title}</div><div class="action-text">${data.text}</div>`;
            }
            panel.classList.add('active');
            document.getElementById('work-gallery').classList.remove('active');
        }

        function openGallery() { 
            closeAll();
            document.getElementById('work-gallery').classList.add('active'); 
        }

        function closeAll() { 
            document.getElementById('side-panel').classList.remove('active'); 
            document.getElementById('work-gallery').classList.remove('active'); 
        }

        document.addEventListener('keydown', (e) => {
            if (e.target && e.target.id === 'game-input' && e.key === 'Enter') {
                if(window.processarJogo) window.processarJogo(e.target.value);
                e.target.value = '';
            }
        });
    </script>
</body>
</html>
