<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDD 3001 ‚Ä¢ Miss√µes</title>
    <link rel="stylesheet" href="/cdd/assets/css/global.css">
    <style>
        body { background: var(--bg-primary); color: var(--text-primary); font-family: 'Courier New', monospace; padding: 20px; }
        .terminal { max-width: 900px; margin: 0 auto; background: rgba(10,12,14,0.98); border: 2px solid var(--accent-primary); }
        .terminal-header { background: var(--bg-secondary); padding: 10px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; }
        h1 { color: var(--accent-primary); margin: 20px; }
        .nav-bar { margin: 20px; padding: 10px 0; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); }
        .nav-bar a { color: var(--text-tertiary); text-decoration: none; margin-right: 20px; }
        .nav-bar a:hover { color: var(--accent-primary); }
        
        .missoes-container { max-width: 800px; margin: 40px auto; }
        .missao-card { background: var(--bg-tertiary); border: 1px solid var(--border-color); margin: 20px 0; padding: 20px; }
        .missao-header { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .missao-nome { color: var(--accent-primary); font-size: 1.2rem; }
        .missao-tipo { font-size: 11px; padding: 3px 8px; background: var(--bg-secondary); }
        .objetivo-item { display: flex; align-items: center; gap: 10px; padding: 8px; border-bottom: 1px solid var(--border-color); }
        .objetivo-check { width: 20px; height: 20px; border: 1px solid var(--border-color); cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .objetivo-check.concluido { background: var(--success); border-color: var(--success); }
        .progresso { height: 4px; background: var(--bg-primary); margin: 15px 0; }
        .progresso-preenchido { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); width: 0%; }
        .btn-missao { padding: 8px 20px; background: transparent; border: 1px solid var(--border-color); color: var(--text-primary); cursor: pointer; }
        .btn-missao:hover { border-color: var(--accent-primary); }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <span class="terminal-path">~/cdd-3001/missoes</span>
            <span class="terminal-status">CENTRAL DE MISS√ïES</span>
        </div>

        <h1 class="text-glow">‚öîÔ∏è MISS√ïES</h1>
        
        <div class="nav-bar">
            <a href="/cdd/">‚Üê TERMINAL</a>
            <a href="/cdd/perfil.html">PERFIL</a>
            <a href="#" class="active">MISS√ïES</a>
            <a href="/cdd/mapa/">MAPA</a>
        </div>

        <div class="missoes-container" id="missoes-container">
            <!-- Miss√µes ser√£o inseridas via JS -->
        </div>
    </div>

    <script src="/cdd/assets/js/rpg-system.js"></script>
    <script>
        const missoes = [
            {
                id: 1,
                nome: 'üìú O Primeiro Fragmento',
                tipo: 'PRINCIPAL',
                desc: 'Explore o m√≥dulo Hist√≥ria',
                objetivos: [
                    { texto: 'Visitar Hist√≥ria', xp: 50, feito: false },
                    { texto: 'Encontrar 3 mem√≥rias', xp: 75, feito: false }
                ],
                recompensa: 200
            },
            {
                id: 2,
                nome: 'üé¨ Imagens do Passado',
                tipo: 'PRINCIPAL',
                desc: 'Decodifique os v√≠deos',
                objetivos: [
                    { texto: 'Assistir ao teaser', xp: 30, feito: false },
                    { texto: 'Encontrar 2 fragmentos', xp: 60, feito: false }
                ],
                recompensa: 150
            },
            {
                id: 3,
                nome: 'üé® Galeria Perdida',
                tipo: 'SECUND√ÅRIA',
                desc: 'Colecione todas as artes',
                objetivos: [
                    { texto: 'Encontrar 5 artes', xp: 40, feito: false },
                    { texto: 'Encontrar 8 artes', xp: 60, feito: false }
                ],
                recompensa: 100
            }
        ];

        function renderizarMissoes() {
            const container = document.getElementById('missoes-container');
            container.innerHTML = missoes.map(m => `
                <div class="missao-card" id="missao-${m.id}">
                    <div class="missao-header">
                        <span class="missao-nome">${m.nome}</span>
                        <span class="missao-tipo">${m.tipo}</span>
                    </div>
                    <div class="missao-desc">${m.desc}</div>
                    <div class="missao-objetivos">
                        ${m.objetivos.map((obj, i) => `
                            <div class="objetivo-item">
                                <div class="objetivo-check" onclick="toggleObjetivo(${m.id}, ${i}, this)">‚úì</div>
                                <span class="objetivo-texto">${obj.texto}</span>
                                <span class="objetivo-xp">+${obj.xp} XP</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="progresso">
                        <div class="progresso-preenchido" id="progresso-${m.id}" style="width: 0%"></div>
                    </div>
                    <div class="missao-footer">
                        <span>Recompensa: +${m.recompensa} XP</span>
                    </div>
                </div>
            `).join('');
        }

        window.toggleObjetivo = function(missaoId, objIndex, elemento) {
            const missao = missoes.find(m => m.id === missaoId);
            const objetivo = missao.objetivos[objIndex];
            
            if (!objetivo.feito) {
                objetivo.feito = true;
                elemento.classList.add('concluido');
                elemento.innerHTML = '‚úì';
                rpg.ganharXP(objetivo.xp, 'miss√£o');
                
                // Verificar se todos objetivos foram conclu√≠dos
                const todosFeitos = missao.objetivos.every(obj => obj.feito);
                if (todosFeitos) {
                    rpg.ganharXP(missao.recompensa, 'miss√£o completa');
                    rpg.notificar('‚öîÔ∏è MISS√ÉO COMPLETA!', missao.nome, 'var(--success)');
                }
                
                // Atualizar barra de progresso
                const percent = (missao.objetivos.filter(obj => obj.feito).length / missao.objetivos.length) * 100;
                document.getElementById(`progresso-${missaoId}`).style.width = percent + '%';
            }
        };

        renderizarMissoes();
    </script>
</body>
</html>
